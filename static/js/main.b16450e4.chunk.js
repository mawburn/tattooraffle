(this.webpackJsonpdiamondstate=this.webpackJsonpdiamondstate||[]).push([[0],{12:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(5),a=n.n(s),i=(n(12),n(2)),o=n(0),l=function(){var e=Object(c.useContext)(p).fileContents,t=Object(c.useState)(!1),n=Object(i.a)(t,2),r=n[0],s=n[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"btnText",onClick:function(){return s(!r)},children:r?"Hide tickets":"Show all ticket holders"}),r&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h2",{children:"Ticket holders"}),e.map((function(e){return Object(o.jsxs)("div",{className:"ticketRow",children:[Object(o.jsxs)("div",{className:"ticketId",children:[Object(o.jsx)("strong",{children:"ID:"})," ",e["Transaction ID"]]}),Object(o.jsxs)("div",{className:"ticketName",children:[Object(o.jsx)("strong",{children:"Name:"})," ",e["Name of sender/receiver"]]}),Object(o.jsxs)("div",{className:"ticketCount",children:[Object(o.jsx)("strong",{children:"Tickets:"})," ",Math.floor(e.Amount.substring(1))]})]},e["Transaction ID"])}))]})]})},j=n(4),u=n.n(j),d=n(6);var b=function(e){var t=new Set;return e.forEach((function(e){t.add(e["Name of sender/receiver"])})),function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),c=[e[n],e[t]];e[t]=c[0],e[n]=c[1]}return e}(Array.from(t)).slice(0,100)},f=function(e){return Math.floor(Math.random()*(Math.floor(e)+1))},h=function(e){var t=[];e.forEach((function(e){for(var n=0;n<Math.floor(e.Amount.substring(1));n++)t.push(e["Transaction ID"])}));var n=f(t.length-1),c=t[n],r=e.find((function(e){return e["Transaction ID"]===c}));return{id:r["Transaction ID"],name:r["Name of sender/receiver"]}},O=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},m=function(){var e=Object(c.useContext)(p).fileContents,t=Object(c.useState)(null),n=Object(i.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(""),l=Object(i.a)(a,2),j=l[0],m=l[1],x=Object(c.useCallback)(Object(d.a)(u.a.mark((function t(){var n,c,r,a,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=h(e),s(n),c=b(e),r=100,a=0;case 5:if(!(a<r)){t.next=13;break}return t.next=8,O(5*a);case 8:i=c.length<100?c[f(c.length-1)]:c[a],m(i);case 10:a++,t.next=5;break;case 13:setTimeout((function(){m(n.name)}),1e3);case 14:case"end":return t.stop()}}),t)}))),[e]);return Object(o.jsx)("div",{className:"spinnerContainer",children:r?Object(o.jsx)("div",{children:j}):Object(o.jsx)("button",{className:"btn",onClick:x,children:"Get Winner"})})},x=n(7),v=n.n(x),g=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useContext)(p).setFileContents,a=Object(c.useCallback)((function(e){var t;(null===e||void 0===e||null===(t=e.currentTarget)||void 0===t?void 0:t.files)&&v.a.parse(e.currentTarget.files[0],{header:!0,skipEmptyLines:!0,error:function(e){r(e.message)},complete:function(e){var t=e.data?e.data.filter((function(e){return"Received P2P"===e["Transaction Type"]&&"PAYMENT DEPOSITED"===e.Status})):[];s(t)}})}),[s]);return Object(o.jsxs)("div",{className:"uploadForm",children:[n&&Object(o.jsx)("h2",{children:n}),Object(o.jsx)("form",{children:Object(o.jsxs)("label",{children:["Upload your file",Object(o.jsx)("input",{type:"file",accept:".csv",onChange:a})]})})]})},p=Object(c.createContext)({fileContents:[],setFileContents:function(e){return null}}),k=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.jsx)(p.Provider,{value:{fileContents:n,setFileContents:r},children:Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("header",{children:[Object(o.jsxs)("h1",{children:[Object(o.jsx)("img",{className:"mainLogo",src:"".concat("/tattooraffle","/logo.png"),alt:"logo"}),"Tattoo Raffle"]}),0===Object.keys(n).length?Object(o.jsx)(g,{}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(m,{}),Object(o.jsx)(l,{})]})]})})})};a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(k,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.b16450e4.chunk.js.map