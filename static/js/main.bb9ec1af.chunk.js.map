{"version":3,"sources":["List.tsx","utils/getNames.ts","utils/getRand.ts","utils/getWinner.ts","Randomizer.tsx","Upload.tsx","App.tsx","index.tsx"],"names":["List","fileContents","useContext","AppContext","useState","shown","setShown","className","onClick","map","f","Math","floor","Amount","substring","getNames","names","Set","forEach","add","array","i","length","j","random","shuffleArray","Array","from","slice","getRand","max","getWinner","ticketArr","push","rand","winnerId","winner","find","id","name","getTimer","timer","Promise","res","setTimeout","Randomizer","setWinner","spinnerName","setSpinnerName","spinnerDone","setSpinnerDone","spin","useCallback","a","_winner","nextName","Upload","error","setError","setFileContents","parseFile","fileEvent","currentTarget","files","Papa","parse","header","skipEmptyLines","message","complete","results","contents","data","filter","d","type","accept","onChange","createContext","App","Provider","value","src","process","alt","Object","keys","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bb9ec1af.chunk.js","sourcesContent":["import { useContext, useState } from 'react'\nimport { AppContext } from './App'\n\nconst List = () => {\n  const { fileContents } = useContext(AppContext)\n  const [shown, setShown] = useState<boolean>(false)\n\n  return (\n    <div>\n      <button className=\"btnText\" onClick={() => setShown(!shown)}>\n        {shown ? 'Hide tickets' : 'Show all ticket holders'}\n      </button>\n      {shown && (\n        <>\n          <h2>Ticket holders</h2>\n          {fileContents.map((f: any) => (\n            <div key={f['Transaction ID']} className=\"ticketRow\">\n              <div className=\"ticketId\">\n                <strong>ID:</strong> {f['Transaction ID']}\n              </div>\n              <div className=\"ticketName\">\n                <strong>Name:</strong> {f['Name of sender/receiver']}\n              </div>\n              <div className=\"ticketCount\">\n                <strong>Tickets:</strong> {Math.floor(f.Amount.substring(1))}\n              </div>\n            </div>\n          ))}\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default List\n","function shuffleArray(array: string[]): string[] {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1))\n    ;[array[i], array[j]] = [array[j], array[i]]\n  }\n\n  return array\n}\n\nconst getNames = (fileContents: object[]): string[] => {\n  const names = new Set<string>()\n\n  fileContents.forEach((f: any) => {\n    names.add(f['Name of sender/receiver'])\n  })\n\n  return shuffleArray(Array.from(names)).slice(0, 100)\n}\n\nexport default getNames\n","const getRand = (max: number) => Math.floor(Math.random() * (Math.floor(max) + 1))\n\nexport default getRand\n","import { Winner } from '../Randomizer'\nimport getRand from './getRand'\n\nconst getWinner = (fileContents: object[]): Winner => {\n  const ticketArr: any[] = []\n\n  fileContents.forEach((f: any) => {\n    for (let i = 0; i < Math.floor(f.Amount.substring(1)); i++) {\n      ticketArr.push(f['Transaction ID'])\n    }\n  })\n\n  const rand = getRand(ticketArr.length - 1)\n\n  const winnerId = ticketArr[rand]\n\n  const winner: any = fileContents.find((f: any) => f['Transaction ID'] === winnerId)\n\n  return {\n    id: winner['Transaction ID'],\n    name: winner['Name of sender/receiver'],\n  }\n}\n\nexport default getWinner\n","import { useCallback, useContext, useState } from 'react'\nimport { AppContext } from './App'\nimport getNames from './utils/getNames'\nimport getRand from './utils/getRand'\nimport getWinner from './utils/getWinner'\n\nexport interface Winner {\n  id: string\n  name: string\n}\n\nconst getTimer = (timer: number) =>\n  new Promise<void>(res => {\n    setTimeout(() => {\n      res()\n    }, timer)\n  })\n\nconst Randomizer = () => {\n  const { fileContents } = useContext(AppContext)\n  const [winner, setWinner] = useState<Winner | null>(null)\n  const [spinnerName, setSpinnerName] = useState<string>('')\n  const [spinnerDone, setSpinnerDone] = useState<boolean>(false)\n\n  const spin = useCallback(async () => {\n    // grab the winner\n    const _winner = getWinner(fileContents)\n    setWinner(_winner)\n\n    // This is just for show\n    const names = getNames(fileContents)\n\n    const timer = 100\n\n    for (let i = 0; i < timer; i++) {\n      await getTimer(i * 5)\n\n      const nextName = names.length < 100 ? names[getRand(names.length - 1)] : names[i]\n\n      setSpinnerName(nextName)\n    }\n\n    setTimeout(() => {\n      setSpinnerName(_winner.name)\n      setSpinnerDone(true)\n    }, 1000)\n  }, [fileContents])\n\n  return (\n    <div className=\"spinnerContainer\">\n      {!winner ? (\n        <button className=\"btn\" onClick={spin}>\n          Get Winner\n        </button>\n      ) : (\n        <div>\n          {spinnerDone && 'Winner: '}\n          {spinnerName}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Randomizer\n","import { ChangeEvent, useCallback, useContext, useState } from 'react'\nimport { AppContext } from './App'\nimport Papa from 'papaparse'\n\nconst Upload = () => {\n  const [error, setError] = useState<string | null>(null)\n  const { setFileContents } = useContext(AppContext)\n\n  const parseFile = useCallback(\n    (fileEvent: ChangeEvent<HTMLInputElement> | null) => {\n      if (fileEvent?.currentTarget?.files) {\n        Papa.parse(fileEvent.currentTarget.files[0], {\n          header: true,\n          skipEmptyLines: true,\n          error: error => {\n            setError(error.message)\n          },\n          complete: results => {\n            const contents = !results.data\n              ? []\n              : results.data.filter(\n                  (d: any) => d['Transaction Type'] === 'Received P2P' && d['Status'] === 'PAYMENT DEPOSITED'\n                )\n\n            setFileContents(contents as object[])\n          },\n        })\n      }\n    },\n    [setFileContents]\n  )\n\n  return (\n    <div className=\"uploadForm\">\n      {error && <h2>{error}</h2>}\n      <form>\n        <label>\n          Upload your file\n          <input type=\"file\" accept=\".csv\" onChange={parseFile} />\n        </label>\n      </form>\n    </div>\n  )\n}\n\nexport default Upload\n","import { createContext, useState } from 'react'\nimport List from './List'\nimport Randomizer from './Randomizer'\nimport Upload from './Upload'\n\ninterface IAppContext {\n  fileContents: object[]\n  setFileContents: (fileContents: object[]) => void\n}\n\nexport const AppContext = createContext<IAppContext>({\n  fileContents: [],\n  setFileContents: (fileContents: object[]) => null,\n})\n\nconst App = () => {\n  const [fileContents, setFileContents] = useState<object[]>([])\n\n  return (\n    <AppContext.Provider value={{ fileContents, setFileContents }}>\n      <div className=\"container\">\n        <header>\n          <h1>\n            <img className=\"mainLogo\" src={`${process.env.PUBLIC_URL}/logo.png`} alt=\"logo\" />\n            Tattoo Raffle\n          </h1>\n          {Object.keys(fileContents).length === 0 ? (\n            <Upload />\n          ) : (\n            <>\n              <Randomizer />\n              <List />\n            </>\n          )}\n        </header>\n      </div>\n    </AppContext.Provider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}